<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ALPHA X</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700;900&family=Orbitron:wght@600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#050513;
      --cyan: rgba(120,220,255,.95);
      --violet: rgba(180,110,255,.95);
      --glass: rgba(255,255,255,.06);
      --line: rgba(180,220,255,.18);
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; background:var(--bg); overflow:hidden; }
    body{ font-family:"Noto Sans TC","PingFang HK",system-ui,-apple-system,Segoe UI,Roboto,Arial; color:#fff; }

    /* ✅ 手机完整显示：用双层背景
       - .bgFill：模糊放大铺满（当补边）
       - .bgMain：清晰 contain（整张图完整显示） */
    .bgFill{
      position:fixed; inset:0; z-index:0;
      background:url("./bg.jpg") center/cover no-repeat;
      transform: scale(1.12);
      filter: blur(18px) saturate(1.15) brightness(.85);
      opacity:.95;
      will-change: transform, filter;
    }
    .bgMain{
      position:fixed; inset:0; z-index:1;
      background:url("./bg.jpg") center/cover no-repeat;
      transform: scale(1.06);
      filter: saturate(1.06) contrast(1.05);
      will-change: transform;
    }

    /* ✅ 手机：主图改成 contain，确保“看得完” */
    @media (max-width: 768px){
      .bgMain{
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        transform: scale(1.02); /* 少少放大但仍然完整 */
      }
    }

    /* 轻电影遮罩（不黑屏） */
    .overlay{
      position:fixed; inset:0; z-index:2; pointer-events:none;
      background:
        radial-gradient(70% 55% at 50% 26%, rgba(120,180,255,.10), rgba(0,0,0,.30)),
        radial-gradient(90% 90% at 50% 90%, rgba(180,110,255,.08), rgba(0,0,0,.36)),
        linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.28));
    }

    /* 扫描线 */
    .scanlines{
      position:fixed; inset:0; z-index:3; pointer-events:none;
      background:
        linear-gradient(to bottom, rgba(255,255,255,.05), rgba(255,255,255,0) 45%),
        repeating-linear-gradient(to bottom,
          rgba(255,255,255,.045) 0px,
          rgba(255,255,255,.045) 1px,
          rgba(0,0,0,0) 4px,
          rgba(0,0,0,0) 8px
        );
      mix-blend-mode: overlay;
      opacity:.11;
      animation: scanMove 7s linear infinite;
    }
    @keyframes scanMove{ from{ transform:translateY(0);} to{ transform:translateY(60px);} }

    /* 粒子画布 */
    #fx{ position:fixed; inset:0; z-index:4; pointer-events:none; }

    /* ✅ iPhone 100vh bug：用 100svh */
    .stage{
      position:relative;
      z-index:5;
      height:100svh;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      padding: clamp(16px, 3vw, 34px);
      text-align:center;
    }

    .top{ margin-top:8px; }
    .title{
      font-size: clamp(28px, 5.2vw, 58px);
      font-weight:900;
      letter-spacing:.05em;
      margin:6px 0 10px;
      background: linear-gradient(90deg, #fff, #cbbdff, #78dcff);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-shadow: 0 18px 90px rgba(0,0,0,.55);
    }
    .subtitle{
      font-size: clamp(13px, 2.7vw, 18px);
      letter-spacing:.18em;
      opacity:.92;
      margin:0;
      text-shadow: 0 12px 60px rgba(0,0,0,.45);
    }

    /* 中间留空（不挡狐狸人物） */
    .spacer{ flex:1; min-height: 10svh; }

    .bottom{
      padding-bottom: max(14px, env(safe-area-inset-bottom));
      display:flex;
      justify-content:center;
    }

    .ctaWrap{
      padding:14px 16px;
      border-radius:26px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(180,220,255,.18);
      backdrop-filter: blur(10px);
      box-shadow: 0 26px 110px rgba(0,0,0,.5);
    }

    .btn{
      appearance:none;
      border:1px solid rgba(160,220,255,.55);
      background: linear-gradient(135deg, rgba(120,220,255,.35), rgba(180,110,255,.28));
      color:#fff;
      padding:16px 46px;
      border-radius:999px;
      cursor:pointer;
      font-family:"Orbitron","Noto Sans TC",system-ui;
      font-weight:800;
      font-size: clamp(15px, 3.2vw, 22px);
      letter-spacing:.22em;
      position:relative;
      overflow:hidden;
      box-shadow:
        0 0 0 1px rgba(0,255,255,.12) inset,
        0 18px 60px rgba(120,180,255,.32),
        0 30px 120px rgba(180,110,255,.22);
      transition: transform .16s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn::before{
      content:"";
      position:absolute; inset:-4px;
      border-radius:999px;
      background: conic-gradient(from 180deg,
        rgba(0,255,255,0),
        rgba(120,220,255,.75),
        rgba(180,110,255,.85),
        rgba(0,255,255,0)
      );
      filter: blur(14px);
      z-index:-1;
      opacity:.95;
      animation: spin 2.7s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg);} }
    .btn:hover{
      transform: translateY(-2px) scale(1.03);
      filter: saturate(1.12);
      box-shadow:
        0 0 0 1px rgba(0,255,255,.18) inset,
        0 28px 110px rgba(120,220,255,.50),
        0 50px 190px rgba(200,140,255,.40);
    }

    .hint{
      margin-top:10px;
      font-size:12px;
      letter-spacing:.14em;
      opacity:.7;
    }

    @media (max-width:520px){
      .btn{ width:78vw; max-width:360px; padding:16px 18px; }
    }

    /* ===== 终极传送门转场 ===== */
    .warp{
      position:fixed; inset:0;
      z-index:999;
      pointer-events:none;
      opacity:0;
      transition: opacity .18s ease;
    }
    .warp.on{ opacity:1; }

    .warp::before{
      content:"";
      position:absolute; inset:-10%;
      background:
        radial-gradient(35% 35% at 50% 62%, rgba(255,255,255,.78), rgba(255,255,255,0) 62%),
        conic-gradient(from 90deg, rgba(120,220,255,.0), rgba(120,220,255,.85), rgba(180,110,255,.85), rgba(120,220,255,.0));
      filter: blur(10px);
      transform: scale(.6);
      animation: warpBloom .9s ease-out forwards;
      mix-blend-mode: screen;
      opacity:0;
    }
    @keyframes warpBloom{
      0%{ opacity:0; transform:scale(.55); }
      20%{ opacity:.95; transform:scale(.9); }
      100%{ opacity:0; transform:scale(1.8); }
    }

    .ring{
      position:absolute; left:50%; top:62%;
      width: 16vmax; height:16vmax;
      transform: translate(-50%,-50%);
      border-radius:999px;
      background:
        radial-gradient(circle at 50% 50%, rgba(0,0,0,0) 0 55%, rgba(255,255,255,.0) 56% 100%),
        conic-gradient(from 180deg, rgba(120,220,255,.0), rgba(120,220,255,.9), rgba(180,110,255,.9), rgba(120,220,255,.0));
      box-shadow:
        0 0 40px rgba(120,220,255,.55),
        0 0 140px rgba(180,110,255,.35);
      animation: ringSpinZoom .9s linear infinite;
      mix-blend-mode: screen;
    }
    @keyframes ringSpinZoom{
      to{ transform: translate(-50%,-50%) rotate(360deg) scale(1.9); }
    }

    .flash{
      position:absolute; inset:0;
      background: radial-gradient(55% 45% at 50% 62%, rgba(255,255,255,.92), rgba(255,255,255,0) 62%);
      opacity:0;
      animation: flash .85s ease-out forwards;
    }
    @keyframes flash{
      0%{ opacity:0; }
      30%{ opacity:.92; }
      100%{ opacity:0; }
    }

    .impact{ filter: blur(2px) brightness(1.06) saturate(1.10); transition: filter .2s ease; }
    .shake{ animation: shake .55s ease-in-out 1; }
    @keyframes shake{
      0%{ transform:translate3d(0,0,0); }
      20%{ transform:translate3d(-6px, 2px,0); }
      40%{ transform:translate3d(6px, -3px,0); }
      60%{ transform:translate3d(-5px, 3px,0); }
      80%{ transform:translate3d(5px, -2px,0); }
      100%{ transform:translate3d(0,0,0); }
    }
  </style>
</head>

<body>
  <!-- 双层背景：手机不裁图 -->
  <div class="bgFill" id="bgFill"></div>
  <div class="bgMain" id="bgMain"></div>

  <div class="overlay"></div>
  <div class="scanlines"></div>
  <canvas id="fx"></canvas>

  <div class="stage" id="stage">
    <header class="top">
      <div class="title">你嘅旅程，由呢一刻開始</div>
      <p class="subtitle">一步踏入 ALPHA X 宇宙。</p>
    </header>

    <div class="spacer"></div>

    <footer class="bottom">
      <div class="ctaWrap">
        <button class="btn" id="enterBtn">進入&nbsp;ALPHA&nbsp;X</button>
        <div class="hint">點擊進入</div>
      </div>
    </footer>
  </div>

  <div class="warp" id="warp">
    <div class="ring"></div>
    <div class="flash"></div>
  </div>

  <script>
    /* ===== 视差推进：bgFill + bgMain 分层，手机也更“活” ===== */
    const bgFill = document.getElementById('bgFill');
    const bgMain = document.getElementById('bgMain');

    let tx=0, ty=0, cx=0, cy=0;
    function setTarget(x,y){
      tx = (x - 0.5) * 14;
      ty = (y - 0.5) * 12;
    }
    window.addEventListener('mousemove', e=> setTarget(e.clientX/innerWidth, e.clientY/innerHeight));
    window.addEventListener('deviceorientation', e=>{
      if(e.gamma==null) return;
      setTarget((e.gamma+45)/90, (e.beta+45)/90);
    }, {passive:true});

    let t=0;
    function anim(){
      t += 0.008;
      cx += (tx - cx) * 0.06;
      cy += (ty - cy) * 0.06;
      const bob = Math.sin(t) * 0.9;

      // 填充层移动更慢（景深）
      bgFill.style.transform = `scale(1.18) translate3d(${cx*0.6}px, ${(cy+bob)*0.6}px, 0)`;
      // 主图移动更明显（角色向前感）
      bgMain.style.transform = `scale(1.04) translate3d(${cx*1.0}px, ${(cy+bob)*1.0}px, 0)`;

      requestAnimationFrame(anim);
    }
    anim();

    /* ===== 粒子：常态漂浮 + 点击吸入 ===== */
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    let W=0,H=0, DPR=1;

    function resize(){
      DPR = Math.min(2, window.devicePixelRatio || 1);
      W = Math.floor(innerWidth * DPR);
      H = Math.floor(innerHeight * DPR);
      canvas.width = W; canvas.height = H;
      canvas.style.width = innerWidth + "px";
      canvas.style.height = innerHeight + "px";
    }
    window.addEventListener('resize', resize);
    resize();

    const particles = [];
    function rand(a,b){ return a + Math.random()*(b-a); }
    function spawn(n=180){
      for(let i=0;i<n;i++){
        particles.push({
          x: rand(0,W), y: rand(0,H),
          vx: rand(-0.08,0.08)*DPR,
          vy: rand(-0.20,-0.05)*DPR,
          r:  rand(0.7,2.0)*DPR,
          a:  rand(0.14,0.72),
          hue: Math.random()<0.5 ? "120,220,255" : "180,110,255"
        });
      }
    }
    spawn(200);

    let suck=false;
    const suckX=0.5, suckY=0.62; // 传送门中心
    function draw(){
      ctx.clearRect(0,0,W,H);
      for(const p of particles){
        p.x += p.vx; p.y += p.vy;
        if(p.y < -12*DPR){ p.y = H + 12*DPR; p.x = rand(0,W); }

        if(suck){
          const cx = W*suckX, cy = H*suckY;
          const dx = cx - p.x, dy = cy - p.y;
          const dist = Math.sqrt(dx*dx+dy*dy) + 0.001;
          const pull = Math.min(1.35, 22*DPR/dist);
          p.x += dx * pull * 0.016;
          p.y += dy * pull * 0.016;
          p.a  = Math.min(1, p.a + 0.02);
          p.r  = Math.min(4.2*DPR, p.r + 0.03*DPR);
        }

        ctx.beginPath();
        ctx.fillStyle = `rgba(${p.hue},${p.a})`;
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fill();
      }
      requestAnimationFrame(draw);
    }
    draw();

    /* ===== 音效 + 氛围（点击后启用） ===== */
    let audioCtx=null, ambience=null;
    function ensureAudio(){
      if(audioCtx) return;
      audioCtx = new (window.AudioContext||window.webkitAudioContext)();

      const osc1 = audioCtx.createOscillator();
      const osc2 = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      const lpf  = audioCtx.createBiquadFilter();

      osc1.type="sine"; osc2.type="triangle";
      osc1.frequency.value = 55;
      osc2.frequency.value = 82.4;
      lpf.type="lowpass"; lpf.frequency.value = 520;

      gain.gain.value = 0.0;
      osc1.connect(lpf); osc2.connect(lpf);
      lpf.connect(gain); gain.connect(audioCtx.destination);
      osc1.start(); osc2.start();
      gain.gain.linearRampToValueAtTime(0.06, audioCtx.currentTime + 1.1);

      // LFO
      const lfo = audioCtx.createOscillator();
      const lfoG = audioCtx.createGain();
      lfo.type="sine"; lfo.frequency.value = 0.18;
      lfoG.gain.value = 120;
      lfo.connect(lfoG); lfoG.connect(lpf.frequency);
      lfo.start();

      ambience = {osc1,osc2,gain,lpf,lfo,lfoG};
    }

    function sfxClick(){
      if(!audioCtx) return;
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type="square";
      o.frequency.setValueAtTime(520, audioCtx.currentTime);
      o.frequency.exponentialRampToValueAtTime(180, audioCtx.currentTime+0.09);
      g.gain.setValueAtTime(0.11, audioCtx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime+0.14);
      o.connect(g).connect(audioCtx.destination);
      o.start(); o.stop(audioCtx.currentTime+0.16);
    }

    function sfxWhoosh(){
      if(!audioCtx) return;
      const src = audioCtx.createBufferSource();
      const buffer = audioCtx.createBuffer(1, audioCtx.sampleRate*0.52, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);
      for(let i=0;i<data.length;i++){
        const t=i/data.length;
        data[i]=(Math.random()*2-1)*(1-t)*0.85;
      }
      src.buffer=buffer;

      const bp=audioCtx.createBiquadFilter();
      bp.type="bandpass"; bp.frequency.value=520; bp.Q.value=0.7;

      const g=audioCtx.createGain();
      g.gain.value=0.0;
      g.gain.linearRampToValueAtTime(0.18, audioCtx.currentTime+0.05);
      g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime+0.5);

      src.connect(bp); bp.connect(g); g.connect(audioCtx.destination);
      src.start(); src.stop(audioCtx.currentTime+0.52);
    }

    function sfxBoom(){
      if(!audioCtx) return;
      const o=audioCtx.createOscillator();
      const g=audioCtx.createGain();
      o.type="sine";
      o.frequency.setValueAtTime(90,audioCtx.currentTime);
      o.frequency.exponentialRampToValueAtTime(35,audioCtx.currentTime+0.28);
      g.gain.setValueAtTime(0.20,audioCtx.currentTime);
      g.gain.exponentialRampToValueAtTime(0.001,audioCtx.currentTime+0.33);
      o.connect(g).connect(audioCtx.destination);
      o.start(); o.stop(audioCtx.currentTime+0.35);
    }

    /* ===== 点击：终极转场 + 跳转 ===== */
    const btn = document.getElementById('enterBtn');
    const stage = document.getElementById('stage');
    const warp = document.getElementById('warp');
    let locked=false;

    btn.addEventListener('click', ()=>{
      if(locked) return;
      locked=true;

      ensureAudio();
      sfxClick();

      // 粒子吸入 + 镜头冲击
      suck=true;
      stage.classList.add('impact');
      document.body.classList.add('shake');

      warp.classList.add('on');
      setTimeout(()=>sfxWhoosh(), 120);
      setTimeout(()=>sfxBoom(), 240);

      setTimeout(()=>{ window.location.href="https://alphaxhk.win"; }, 1050);
    });
  </script>
</body>
</html>
