<!doctype html>
<html lang="zh-HK">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ALPHA X</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700;900&family=Orbitron:wght@600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#050513;
      --cyan: rgba(120,220,255,.95);
      --violet: rgba(180,110,255,.95);
      --line: rgba(180,220,255,.18);
      --glass: rgba(255,255,255,.07);
      --glass2: rgba(255,255,255,.02);
      --shadow: rgba(0,0,0,.55);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; background:var(--bg); overflow:hidden; }
    body{ font-family:"Noto Sans TC","PingFang HK",system-ui,-apple-system,Segoe UI,Roboto,Arial; color:#fff; }

    /* =========================
       BACKGROUND (Auto Switch)
       ========================= */
    .bg{
      position:fixed; inset:0; z-index:0;
      background: url("./bg-desktop-1920x1080.jpg") center/cover no-repeat;
      /* “走路推进感”：慢慢向前推进 + 微漂浮 */
      transform: scale(1.12);
      will-change: transform, filter;
      filter: saturate(1.10) contrast(1.08) brightness(1.02);
      animation: bgWalk 9s ease-in-out infinite alternate;
    }
    /* 手机上换图 + 位置向下偏，确保狐狸/人物 */
    @media (max-width: 768px){
      .bg{
        background-image:url("./bg-mobile-1080x1920.jpg");
        background-position: center 66%;
        transform: scale(1.06);
        animation-duration: 10.5s;
      }
    }
    @keyframes bgWalk{
      0%   { transform: scale(1.12) translate3d(0px, 0px, 0); }
      40%  { transform: scale(1.15) translate3d(-10px, 8px, 0); }
      70%  { transform: scale(1.17) translate3d(12px, -6px, 0); }
      100% { transform: scale(1.20) translate3d(0px, 10px, 0); }
    }

    /* Cinematic overlay (不分三截) */
    .overlay{
      position:fixed; inset:0; z-index:1; pointer-events:none;
      background:
        radial-gradient(70% 55% at 50% 18%, rgba(120,180,255,.12), rgba(0,0,0,.28)),
        radial-gradient(90% 90% at 50% 92%, rgba(180,110,255,.10), rgba(0,0,0,.30)),
        linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.22));
    }

    /* Subtle scanlines */
    .scanlines{
      position:fixed; inset:0; z-index:2; pointer-events:none;
      background:
        repeating-linear-gradient(to bottom,
          rgba(255,255,255,.04) 0px,
          rgba(255,255,255,.04) 1px,
          rgba(0,0,0,0) 7px,
          rgba(0,0,0,0) 12px
        );
      mix-blend-mode: overlay;
      opacity:.10;
      animation: scanMove 7s linear infinite;
    }
    @keyframes scanMove{ from{ transform:translateY(0);} to{ transform:translateY(90px);} }

    /* =========================
       CSS Particle Field (NO JS)
       ========================= */
    .particles{
      position:fixed; inset:0; z-index:3; pointer-events:none;
      overflow:hidden;
      filter: drop-shadow(0 0 10px rgba(120,220,255,.22));
    }
    .particles::before,
    .particles::after{
      content:"";
      position:absolute; inset:-40%;
      background:
        radial-gradient(circle at 12% 18%, rgba(120,220,255,.55) 0 2px, rgba(0,0,0,0) 3px),
        radial-gradient(circle at 25% 45%, rgba(180,110,255,.55) 0 2px, rgba(0,0,0,0) 3px),
        radial-gradient(circle at 38% 72%, rgba(120,220,255,.45) 0 1.5px, rgba(0,0,0,0) 3px),
        radial-gradient(circle at 56% 22%, rgba(180,110,255,.45) 0 1.6px, rgba(0,0,0,0) 3px),
        radial-gradient(circle at 70% 52%, rgba(120,220,255,.55) 0 2px, rgba(0,0,0,0) 3px),
        radial-gradient(circle at 82% 78%, rgba(180,110,255,.50) 0 2px, rgba(0,0,0,0) 3px),
        radial-gradient(circle at 90% 34%, rgba(120,220,255,.40) 0 1.4px, rgba(0,0,0,0) 3px);
      background-size: 520px 520px;
      opacity:.55;
      animation: driftA 14s linear infinite;
      transform: rotate(0deg);
      mix-blend-mode: screen;
    }
    .particles::after{
      background-size: 740px 740px;
      opacity:.42;
      animation: driftB 19s linear infinite reverse;
      filter: blur(0.2px);
    }
    @keyframes driftA{
      from{ transform: translate3d(-5%, 10%, 0) rotate(0deg); }
      to  { transform: translate3d(10%, -8%, 0) rotate(360deg); }
    }
    @keyframes driftB{
      from{ transform: translate3d(12%, -6%, 0) rotate(0deg); }
      to  { transform: translate3d(-10%, 10%, 0) rotate(360deg); }
    }

    /* Portal glow pulse (更震撼) */
    .portalGlow{
      position:fixed; inset:0; z-index:4; pointer-events:none;
      background:
        radial-gradient(32% 24% at 50% 52%, rgba(120,220,255,.22), rgba(0,0,0,0) 70%),
        radial-gradient(34% 26% at 50% 52%, rgba(180,110,255,.16), rgba(0,0,0,0) 72%);
      mix-blend-mode: screen;
      opacity:.75;
      animation: portalPulse 2.6s ease-in-out infinite;
    }
    @keyframes portalPulse{
      0%,100%{ opacity:.55; filter: blur(0px); }
      50%{ opacity:.95; filter: blur(0.4px); }
    }

    /* =========================
       Layout
       ========================= */
    .stage{
      position:relative; z-index:10;
      height:100svh; /* iOS safe viewport */
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      padding: clamp(16px, 3vw, 36px);
      text-align:center;
    }

    .top{ margin-top: max(8px, env(safe-area-inset-top)); }
    .title{
      font-size: clamp(28px, 5.0vw, 62px);
      font-weight: 900;
      letter-spacing:.05em;
      margin: 10px 0 10px;
      background: linear-gradient(90deg, #ffffff, #e2dcff, #78dcff);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-shadow: 0 18px 90px rgba(0,0,0,.55);
      animation: titleGlow 2.8s ease-in-out infinite;
    }
    @keyframes titleGlow{
      0%,100%{ filter: drop-shadow(0 0 8px rgba(120,220,255,.18)); }
      50%{ filter: drop-shadow(0 0 18px rgba(180,110,255,.28)); }
    }
    .subtitle{
      font-size: clamp(13px, 2.2vw, 18px);
      letter-spacing:.18em;
      opacity:.92;
      margin:0;
      text-shadow: 0 12px 60px rgba(0,0,0,.40);
    }

    /* 留位避免遮角色 */
    .spacer{ flex:1; min-height: 12svh; }

    .bottom{
      padding-bottom: max(14px, env(safe-area-inset-bottom));
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }

    .ctaWrap{
      padding:14px 16px;
      border-radius:26px;
      background: linear-gradient(180deg, var(--glass), var(--glass2));
      border: 1px solid rgba(180,220,255,.18);
      backdrop-filter: blur(10px);
      box-shadow: 0 26px 110px rgba(0,0,0,.45);
      position:relative;
      overflow:hidden;
    }
    .ctaWrap::before{
      content:"";
      position:absolute; inset:-60%;
      background: conic-gradient(from 180deg,
        rgba(120,220,255,0),
        rgba(120,220,255,.20),
        rgba(180,110,255,.22),
        rgba(120,220,255,0)
      );
      animation: wrapSpin 6s linear infinite;
      opacity:.8;
      mix-blend-mode: screen;
    }
    @keyframes wrapSpin{ to{ transform: rotate(360deg); } }

    .btn{
      appearance:none;
      border:1px solid rgba(160,220,255,.55);
      background: linear-gradient(135deg, rgba(120,220,255,.38), rgba(180,110,255,.30));
      color:#fff;
      padding:16px 46px;
      border-radius:999px;
      cursor:pointer;
      font-family:"Orbitron","Noto Sans TC",system-ui;
      font-weight:800;
      font-size: clamp(15px, 3.2vw, 22px);
      letter-spacing:.22em;
      position:relative;
      overflow:hidden;
      box-shadow:
        0 0 0 1px rgba(0,255,255,.12) inset,
        0 18px 60px rgba(120,180,255,.32),
        0 30px 120px rgba(180,110,255,.22);
      transition: transform .16s ease, box-shadow .2s ease, filter .2s ease;
      z-index:2;
    }
    .btn::before{
      content:"";
      position:absolute; inset:-4px;
      border-radius:999px;
      background: conic-gradient(from 180deg,
        rgba(0,255,255,0),
        rgba(120,220,255,.85),
        rgba(180,110,255,.90),
        rgba(0,255,255,0)
      );
      filter: blur(14px);
      z-index:-1;
      opacity:.95;
      animation: spin 2.7s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg);} }

    .btn:hover{
      transform: translateY(-2px) scale(1.03);
      filter: saturate(1.15);
      box-shadow:
        0 0 0 1px rgba(0,255,255,.18) inset,
        0 28px 110px rgba(120,220,255,.52),
        0 50px 190px rgba(200,140,255,.42);
    }
    .hint{
      margin-top:10px;
      font-size:12px;
      letter-spacing:.14em;
      opacity:.75;
      position:relative;
      z-index:2;
    }

    /* Music toggle */
    .chip{
      appearance:none;
      border:1px solid rgba(180,220,255,.20);
      background: rgba(0,0,0,.25);
      color: rgba(255,255,255,.86);
      border-radius:999px;
      padding:10px 14px;
      cursor:pointer;
      font-size:12px;
      letter-spacing:.10em;
      backdrop-filter: blur(8px);
      box-shadow: 0 18px 60px rgba(0,0,0,.25);
      z-index:2;
    }
    .chip strong{ font-family:"Orbitron",system-ui; letter-spacing:.14em; }
    .chip.on{
      border-color: rgba(120,220,255,.45);
      background: linear-gradient(135deg, rgba(120,220,255,.16), rgba(180,110,255,.12));
      box-shadow: 0 18px 70px rgba(120,220,255,.18);
    }

    /* =========================
       Warp Transition
       ========================= */
    .warp{
      position:fixed; inset:0;
      z-index:999; pointer-events:none;
      opacity:0; transition: opacity .18s ease;
    }
    .warp.on{ opacity:1; }

    .warp::before{
      content:"";
      position:absolute; inset:-10%;
      background:
        radial-gradient(35% 35% at 50% 62%, rgba(255,255,255,.82), rgba(255,255,255,0) 62%),
        conic-gradient(from 90deg, rgba(120,220,255,.0), rgba(120,220,255,.90), rgba(180,110,255,.92), rgba(120,220,255,.0));
      filter: blur(10px);
      transform: scale(.6);
      animation: warpBloom .95s ease-out forwards;
      mix-blend-mode: screen;
      opacity:0;
    }
    @keyframes warpBloom{
      0%{ opacity:0; transform:scale(.55); }
      18%{ opacity:1; transform:scale(.95); }
      100%{ opacity:0; transform:scale(1.95); }
    }
    .ring{
      position:absolute; left:50%; top:62%;
      width: 18vmax; height:18vmax;
      transform: translate(-50%,-50%);
      border-radius:999px;
      background:
        conic-gradient(from 180deg, rgba(120,220,255,.0), rgba(120,220,255,.95), rgba(180,110,255,.95), rgba(120,220,255,.0));
      box-shadow: 0 0 40px rgba(120,220,255,.55), 0 0 140px rgba(180,110,255,.35);
      animation: ringSpinZoom .85s linear infinite;
      mix-blend-mode: screen;
      opacity:.9;
    }
    @keyframes ringSpinZoom{
      to{ transform: translate(-50%,-50%) rotate(360deg) scale(2.1); }
    }
    .flash{
      position:absolute; inset:0;
      background: radial-gradient(55% 45% at 50% 62%, rgba(255,255,255,.95), rgba(255,255,255,0) 62%);
      opacity:0;
      animation: flash .85s ease-out forwards;
    }
    @keyframes flash{
      0%{ opacity:0; }
      30%{ opacity:.96; }
      100%{ opacity:0; }
    }

    .impact{ filter: blur(2px) brightness(1.06) saturate(1.12); transition: filter .2s ease; }
    .shake{ animation: shake .55s ease-in-out 1; }
    @keyframes shake{
      0%{ transform:translate3d(0,0,0); }
      20%{ transform:translate3d(-6px, 2px,0); }
      40%{ transform:translate3d(6px, -3px,0); }
      60%{ transform:translate3d(-5px, 3px,0); }
      80%{ transform:translate3d(5px, -2px,0); }
      100%{ transform:translate3d(0,0,0); }
    }

    /* Reduced motion accessibility */
    @media (prefers-reduced-motion: reduce){
      .bg,.particles::before,.particles::after,.portalGlow,.scanlines{ animation:none !important; }
    }
  </style>
</head>

<body>
  <!-- Layers -->
  <div class="bg" id="bg"></div>
  <div class="overlay"></div>
  <div class="scanlines"></div>
  <div class="particles" id="particles"></div>
  <div class="portalGlow"></div>

  <!-- UI -->
  <div class="stage" id="stage">
    <header class="top">
      <div class="title">你嘅旅程，由呢一刻開始</div>
      <p class="subtitle">一步踏入 ALPHA X 宇宙。</p>
    </header>

    <div class="spacer"></div>

    <footer class="bottom">
      <div class="ctaWrap">
        <button class="btn" id="enterBtn">進入&nbsp;ALPHA&nbsp;X</button>
        <div class="hint">點擊進入</div>
      </div>

      <!-- 音乐按钮：桌面可自动播放；手机第一次点它或点“进入”后播放 -->
      <button class="chip" id="musicBtn" aria-label="music">
        <strong>♫</strong>&nbsp;<span id="musicLabel">開聲</span>
      </button>
    </footer>
  </div>

  <!-- Warp -->
  <div class="warp" id="warp">
    <div class="ring"></div>
    <div class="flash"></div>
  </div>

  <!-- Audio: 你可以之后换成自己的 mp3 链接 -->
  <!-- 注意：手机无法真正“未点击就自动播放”，所以我们做了“首击即播”方案 -->
  <audio id="bgm" preload="auto" loop>
    <!-- 你可以替换成自己上传到 GitHub 的 mp3，例如: ./bgm.mp3 -->
    <!-- 先留空也没问题，页面不会报错 -->
  </audio>

  <script>
    /* =========================
       Music Strategy (Mobile-safe)
       - Desktop: try autoplay
       - Mobile: start on first user gesture (click/tap)
       ========================= */
    const bgm = document.getElementById('bgm');
    const musicBtn = document.getElementById('musicBtn');
    const musicLabel = document.getElementById('musicLabel');

    let musicOn = false;
    let armed = false;

    // optional: if you later set bgm.src, we can try autoplay.
    async function tryPlay(){
      if(!bgm.src) return false; // 没音乐文件就不播
      try{
        await bgm.play();
        musicOn = true;
        musicBtn.classList.add('on');
        musicLabel.textContent = "已開";
        return true;
      }catch(e){
        return false;
      }
    }

    function setMusicOff(){
      musicOn = false;
      musicBtn.classList.remove('on');
      musicLabel.textContent = "開聲";
      try{ bgm.pause(); }catch(e){}
    }

    async function toggleMusic(){
      // 第一次交互：允许播放
      armed = true;
      if(!bgm.src){
        // 你还没放音乐文件，给个提示（不弹窗，避免烦）
        musicLabel.textContent = "未上傳音樂";
        setTimeout(()=>{ musicLabel.textContent = musicOn ? "已開" : "開聲"; }, 1400);
        return;
      }

      if(musicOn){
        setMusicOff();
      }else{
        const ok = await tryPlay();
        if(!ok){
          musicLabel.textContent = "請再點一次";
          setTimeout(()=>{ musicLabel.textContent = "開聲"; }, 1200);
        }
      }
    }

    musicBtn.addEventListener('click', toggleMusic);

    // Desktop attempt autoplay if src exists
    window.addEventListener('load', async ()=>{
      // 如果你之后放了 bgm.src，这里会自动尝试
      // 例如：bgm.src = "./bgm.mp3";
      // 目前留空不会做任何事
      await tryPlay();
    });

    // Mobile: first gesture anywhere can start music if user wants it
    function armFirstGesture(){
      if(armed) return;
      armed = true;
      // 不强制开声，避免用户反感；如果你想“点进入必播”，我们在进入按钮里做
    }
    window.addEventListener('touchstart', armFirstGesture, {passive:true});
    window.addEventListener('mousedown', armFirstGesture);

    /* =========================
       Enter Button: warp + particles "suck" (CSS-based)
       Since particles are CSS, we simulate "suck" by boosting overlays + speeding bg
       ========================= */
    const btn = document.getElementById('enterBtn');
    const stage = document.getElementById('stage');
    const warp = document.getElementById('warp');
    const bg = document.getElementById('bg');
    const particles = document.getElementById('particles');

    let locked=false;

    function vibrate(ms){
      try{ if(navigator.vibrate) navigator.vibrate(ms); }catch(e){}
    }

    btn.addEventListener('click', async ()=>{
      if(locked) return;
      locked=true;

      // 如果手机用户没有开声，但你想“点进入就播”，这里强制尝试一次
      if(!musicOn){
        // 如果你有放 bgm.mp3，会在这一步开始播放（符合手机规则：用户点击）
        await tryPlay();
      }

      vibrate([18, 30, 18]);

      // 强化动感：背景加速推进、粒子加速旋转
      stage.classList.add("impact");
      document.body.classList.add("shake");
      warp.classList.add("on");

      bg.style.animationDuration = "1.2s";
      particles.style.filter = "drop-shadow(0 0 16px rgba(120,220,255,.38))";
      particles.style.transform = "scale(1.04)";
      particles.style.opacity = "0.95";

      // 1秒后跳转
      setTimeout(()=>{ window.location.href="https://alphaxhk.win"; }, 1050);
    });
  </script>
</body>
</html>
